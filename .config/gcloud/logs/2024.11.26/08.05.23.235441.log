2024-11-26 08:05:23,480 DEBUG    root            Loaded Command Group: ['gcloud', 'compute']
2024-11-26 08:05:23,496 DEBUG    root            Loaded Command Group: ['gcloud', 'compute', 'instances']
2024-11-26 08:05:23,537 DEBUG    root            Loaded Command Group: ['gcloud', 'compute', 'instances', 'set_service_account']
2024-11-26 08:05:23,540 DEBUG    root            Running [gcloud.compute.instances.set-service-account] with arguments: [--scopes: "['https://www.googleapis.com/auth/cloud-platform']", --service-account: "644941739395-compute@developer.gserviceaccount.com", --zone: "us-central1-a", INSTANCE_NAME: "bash-scripting"]
2024-11-26 08:05:23,741 DEBUG    google.auth.transport.requests Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/644941739395-compute@developer.gserviceaccount.com/?recursive=true
2024-11-26 08:05:23,748 DEBUG    urllib3.connectionpool Starting new HTTP connection (1): metadata.google.internal:80
2024-11-26 08:05:23,750 DEBUG    urllib3.connectionpool http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/644941739395-compute@developer.gserviceaccount.com/?recursive=true HTTP/1.1" 200 141
2024-11-26 08:05:23,778 DEBUG    google.auth.transport.requests Making request: GET http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/644941739395-compute@developer.gserviceaccount.com/token
2024-11-26 08:05:23,782 DEBUG    urllib3.connectionpool http://metadata.google.internal:80 "GET /computeMetadata/v1/instance/service-accounts/644941739395-compute@developer.gserviceaccount.com/token HTTP/1.1" 200 870
2024-11-26 08:05:24,174 DEBUG    urllib3.connectionpool Starting new HTTPS connection (1): compute.googleapis.com:443
2024-11-26 08:05:24,525 DEBUG    urllib3.connectionpool https://compute.googleapis.com:443 "POST /compute/v1/projects/inspired-photon-441609-k7/zones/us-central1-a/instances/bash-scripting/setServiceAccount?alt=json HTTP/1.1" 200 None
2024-11-26 08:05:24,529 DEBUG    root            Operations to inspect: [(<Operation
 id: 355602451751518123
 insertTime: '2024-11-26T00:05:24.486-08:00'
 kind: 'compute#operation'
 name: 'operation-1732608324284-627cc4fb431de-6baa26e2-5a1bcf7c'
 operationType: 'setServiceAccount'
 progress: 0
 selfLink: 'https://www.googleapis.com/compute/v1/projects/inspired-photon-441609-k7/zones/us-central1-a/operations/operation-1732608324284-627cc4fb431de-6baa26e2-5a1bcf7c'
 startTime: '2024-11-26T00:05:24.489-08:00'
 status: StatusValueValuesEnum(RUNNING, 2)
 targetId: 8218319005163261541
 targetLink: 'https://www.googleapis.com/compute/v1/projects/inspired-photon-441609-k7/zones/us-central1-a/instances/bash-scripting'
 user: '644941739395-compute@developer.gserviceaccount.com'
 warnings: []
 zone: 'https://www.googleapis.com/compute/v1/projects/inspired-photon-441609-k7/zones/us-central1-a'>, 3)]
2024-11-26 08:05:24,531 DEBUG    urllib3.connectionpool Starting new HTTPS connection (1): compute.googleapis.com:443
2024-11-26 08:05:24,927 DEBUG    urllib3.connectionpool https://compute.googleapis.com:443 "POST /compute/v1/projects/inspired-photon-441609-k7/zones/us-central1-a/operations/operation-1732608324284-627cc4fb431de-6baa26e2-5a1bcf7c/wait?alt=json HTTP/1.1" 200 None
2024-11-26 08:05:24,930 DEBUG    root            Operations to inspect: [(<Operation
 endTime: '2024-11-26T00:05:24.878-08:00'
 error: <ErrorValue
 errors: [<ErrorsValueListEntry
 code: 'INVALID_USAGE'
 errorDetails: []
 message: 'The instance must be stopped before the service account can be changed.'>]>
 httpErrorMessage: 'BAD REQUEST'
 httpErrorStatusCode: 400
 id: 355602451751518123
 insertTime: '2024-11-26T00:05:24.486-08:00'
 kind: 'compute#operation'
 name: 'operation-1732608324284-627cc4fb431de-6baa26e2-5a1bcf7c'
 operationType: 'setServiceAccount'
 progress: 100
 selfLink: 'https://www.googleapis.com/compute/v1/projects/inspired-photon-441609-k7/zones/us-central1-a/operations/operation-1732608324284-627cc4fb431de-6baa26e2-5a1bcf7c'
 startTime: '2024-11-26T00:05:24.489-08:00'
 status: StatusValueValuesEnum(DONE, 0)
 targetId: 8218319005163261541
 targetLink: 'https://www.googleapis.com/compute/v1/projects/inspired-photon-441609-k7/zones/us-central1-a/instances/bash-scripting'
 user: '644941739395-compute@developer.gserviceaccount.com'
 warnings: []
 zone: 'https://www.googleapis.com/compute/v1/projects/inspired-photon-441609-k7/zones/us-central1-a'>, 3)]
2024-11-26 08:05:24,931 DEBUG    root            Chosen display Format:list[title="Could not fetch resource:",always-display-title]
2024-11-26 08:05:24,931 DEBUG    root            (gcloud.compute.instances.set-service-account) Could not fetch resource:
 - The instance must be stopped before the service account can be changed.
Traceback (most recent call last):
  File "/snap/google-cloud-cli/275/lib/googlecloudsdk/calliope/cli.py", line 998, in Execute
    resources = calliope_command.Run(cli=self, args=args)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/snap/google-cloud-cli/275/lib/googlecloudsdk/calliope/backend.py", line 842, in Run
    resources = command_instance.Run(args)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/snap/google-cloud-cli/275/lib/surface/compute/instances/set_service_account.py", line 158, in Run
    return client.MakeRequests([(
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/snap/google-cloud-cli/275/lib/googlecloudsdk/api_lib/compute/client_adapter.py", line 145, in MakeRequests
    utils.RaiseToolException(
  File "/snap/google-cloud-cli/275/lib/googlecloudsdk/api_lib/compute/utils.py", line 139, in RaiseToolException
    RaiseException(problems, calliope_exceptions.ToolException, error_message)
  File "/snap/google-cloud-cli/275/lib/googlecloudsdk/api_lib/compute/utils.py", line 148, in RaiseException
    raise exception(
googlecloudsdk.calliope.exceptions.ToolException: Could not fetch resource:
 - The instance must be stopped before the service account can be changed.

2024-11-26 08:05:24,949 ERROR    root            (gcloud.compute.instances.set-service-account) Could not fetch resource:
 - The instance must be stopped before the service account can be changed.

